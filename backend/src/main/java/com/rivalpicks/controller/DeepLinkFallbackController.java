package com.rivalpicks.controller;

import jakarta.servlet.http.HttpServletRequest;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * Fallback controller for deep links when the app is not installed.
 *
 * When Universal Links (iOS) or App Links (Android) are configured and the app IS installed,
 * the OS intercepts the URL and opens the app directly - this controller is never reached.
 *
 * This controller only handles requests when:
 * - The app is NOT installed on the device
 * - The user is on a desktop browser
 * - Universal/App Links fail for some reason
 */
@RestController
@RequestMapping("/auth")
public class DeepLinkFallbackController {

    private static final String APP_STORE_URL = "https://apps.apple.com/app/rivalpicks/id6756641492";
    private static final String PLAY_STORE_URL = "https://play.google.com/store/apps/details?id=com.rivalpicks.app";
    private static final String LOGO_BASE64 = "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";

    /**
     * Fallback for email verification deep link.
     */
    @GetMapping("/verify-email-change")
    public ResponseEntity<String> verifyEmailFallback(HttpServletRequest request) {
        return handleFallback(request);
    }

    /**
     * Fallback for password reset deep link.
     */
    @GetMapping("/reset-password")
    public ResponseEntity<String> resetPasswordFallback(HttpServletRequest request) {
        return handleFallback(request);
    }

    private ResponseEntity<String> handleFallback(HttpServletRequest request) {
        String userAgent = request.getHeader("User-Agent");

        if (userAgent != null) {
            String ua = userAgent.toLowerCase();

            // iOS device - redirect to App Store
            if (ua.contains("iphone") || ua.contains("ipad") || ua.contains("ipod")) {
                return ResponseEntity.status(302)
                    .header("Location", APP_STORE_URL)
                    .build();
            }

            // Android device - redirect to Play Store
            if (ua.contains("android")) {
                return ResponseEntity.status(302)
                    .header("Location", PLAY_STORE_URL)
                    .build();
            }
        }

        // Desktop or unknown - show page with both store links
        return ResponseEntity.ok()
            .contentType(MediaType.TEXT_HTML)
            .body(buildFallbackPage());
    }

    private String buildFallbackPage() {
        return """
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Get RivalPicks</title>
                <style>
                    * { box-sizing: border-box; margin: 0; padding: 0; }
                    body {
                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                        background: #0a0a0f;
                        color: #fff;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        min-height: 100vh;
                        text-align: center;
                        padding: 20px;
                    }
                    .container { max-width: 400px; width: 100%%; }
                    .logo {
                        width: 100px;
                        height: 100px;
                        margin: 0 auto 24px;
                    }
                    .logo img {
                        width: 100%%;
                        height: 100%%;
                        object-fit: contain;
                    }
                    h1 {
                        color: #00D4AA;
                        font-size: 28px;
                        margin-bottom: 12px;
                    }
                    p {
                        color: rgba(255, 255, 255, 0.7);
                        font-size: 16px;
                        margin-bottom: 32px;
                        line-height: 1.5;
                    }
                    .buttons {
                        display: flex;
                        flex-direction: column;
                        gap: 16px;
                    }
                    a {
                        background: #00D4AA;
                        color: #000;
                        padding: 16px 32px;
                        border-radius: 12px;
                        text-decoration: none;
                        font-weight: 600;
                        font-size: 16px;
                        transition: opacity 0.2s;
                    }
                    a:hover { opacity: 0.9; }
                    a.secondary {
                        background: rgba(255, 255, 255, 0.1);
                        color: #fff;
                    }
                </style>
            </head>
            <body>
                <div class="container">
                    <div class="logo">
                        <img src="data:image/png;base64,%s" alt="RivalPicks">
                    </div>
                    <h1>RivalPicks</h1>
                    <p>Download the RivalPicks app to continue with your request.</p>
                    <div class="buttons">
                        <a href="%s">Download on App Store</a>
                        <a href="%s" class="secondary">Get it on Google Play</a>
                    </div>
                </div>
            </body>
            </html>
            """.formatted(LOGO_BASE64, APP_STORE_URL, PLAY_STORE_URL);
    }
}
